install.packages(c("tidyverse", "magrittr", "ggplot2", "reticulate", "tigris", "sf", "ggrepel"))
renv::status()
renv::install()
renv::activate()
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readr)
library(magrittr) # for %>%
library(ggplot2) # mpg dataset and plotting
library(reticulate) # for calling python
library(tigris) # for states data
library(sf) # simple features
library(ggrepel) # for repelling labels off of one another
library(scales) # for comma-tizing the y tick labels
renv::status()
renv::restore()
addinslist:::addinslistAddin()
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readr)
library(magrittr) # for %>%
library(ggplot2) # mpg dataset and plotting
library(reticulate) # for calling python
library(tigris) # for states data
library(sf) # simple features
library(ggrepel) # for repelling labels off of one another
library(scales) # for comma-tizing the y tick labels
# for now, loading /all/ the data
# TODO cleanup this crap
MTS_AgcyInvest <- readr::read_csv("MTS_AgcyInvest_20150331_20250930.csv")
#readr::spec(MTS_AgcyInvest)
MTS_AgcyIssue <- readr::read_csv("MTS_AgcyIssue_20150331_20250930.csv")
#readr::spec(MTS_AgcyIssue)
MTS_AgcySpecIssue <- readr::read_csv("MTS_AgcySpecIssue_20150331_20250930.csv")
#readr::spec(MTS_AgcySpecIssue)
MTS_BudsRsltFin <- readr::read_csv("MTS_BudRsltFin_20150331_20250930.csv")
#readr::spec(MTS_BudsRsltFin)
MTS_ChgExcsLiab <- readr::read_csv("MTS_ChgExcsLiab_20150331_20250930.csv")
#readr::spec(MTS_ChgExcsLiab)
MTS_FinDfctDispSur <- readr::read_csv("MTS_FinDfctDispSur_20150331_20250930.csv")
#readr::spec(MTS_FinDfctDispSur)
MTS_GuarDirLoan <- readr::read_csv("MTS_GuarDirLoan_20150331_20250930.csv")
#readr::spec(MTS_GuarDirLoan)
MTS_OutlyAgcy <- readr::read_csv("MTS_OutlyAgcy_20150331_20250930.csv")
#readr::spec(MTS_OutlyAgcy)
MTS_RcptOutlyDfctSur <- readr::read_csv("MTS_RcptOutlyDfctSur_20150331_20250930.csv")
#readr::spec(MTS_RcptOutlyDfctSur)
MTS_RcptOutlyMo <- readr::read_csv("MTS_RcptOutlyMo_20150331_20250930.csv")
#readr::spec(MTS_RcptOutlyMo)
MTS_RcptSrc <- readr::read_csv("MTS_RcptSrc_20150331_20250930.csv")
#readr::spec(MTS_RcptSrc)
MTS_RcptSrcOutlyAgcy <- readr::read_csv("MTS_RcptSrcOutlyAgcy_20150331_20250930.csv")
#readr::spec(MTS_RcptSrcOutlyAgcy)
MTS_RcptSrcOutlyFcn <- readr::read_csv("MTS_RcptSrcOutlyFcn_20150331_20250930.csv")
#readr::spec(MTS_RcptSrcOutlyFcn)
MTS_TrustFund <- readr::read_csv("MTS_TrustFund_20150331_20250930.csv")
#readr::spec(MTS_TrustFund)
# let's poke around the MTS_GuardDirLoan dataset for anything interesting
#colnames(MTS_GuarDirLoan) <- str_replace_all(colnames(MTS_GuarDirLoan), " ", ".") # TODO FUCK YOU Fix me, replace spaces with periods
#
# MTS_GuarDirLoan_CumSums <- MTS_GuarDirLoan |>
#   filter(Classification.Description == "Department of Education:") |>
#   filter(!is.na(Current.Month.Net.Transaction.Amount)) |>
#   select(`Record.Date`, `Classification.Description`, `Current.Month.Net.Transaction.Amount`, `Fiscal.Year.to.Date.Net.Transaction.Amount`)
# DoE is full of null data, yay!
# let's try something else...
# TODO insert more data probing and such here!
#MTS_GuarDirLoan_CumSums <-
MTS_RcptSrcOutlyAgcy |>
#filter(Classification.Description == "Department of Education:") |>
filter(!is.na(Current.Month.Net.Transaction.Amount))
# let's poke around the MTS_GuardDirLoan dataset for anything interesting
#colnames(MTS_GuarDirLoan) <- str_replace_all(colnames(MTS_GuarDirLoan), " ", ".") # TODO FUCK YOU Fix me, replace spaces with periods
#
# MTS_GuarDirLoan_CumSums <- MTS_GuarDirLoan |>
#   filter(Classification.Description == "Department of Education:") |>
#   filter(!is.na(Current.Month.Net.Transaction.Amount)) |>
#   select(`Record.Date`, `Classification.Description`, `Current.Month.Net.Transaction.Amount`, `Fiscal.Year.to.Date.Net.Transaction.Amount`)
# DoE is full of null data, yay!
# let's try something else...
# TODO insert more data probing and such here!
#MTS_GuarDirLoan_CumSums <-
MTS_RcptSrcOutlyAgcy
#filter(Classification.Description == "Department of Education:") |>
# filter(!is.na(Current.Month.Net.Transaction.Amount))
#select(`Record.Date`, `Classification.Description`, `Current.Month.Net.Transaction.Amount`, `Fiscal.Year.to.Date.Net.Transaction.Amount`)
#mutate(Cumulative.Transaction = cumsum(`Current.Month.Net.Transaction.Amount`))
#rename(Record.Date = `Record Date`) %>% # TODO probably better way to do this in a batch
#rename(Classification.Description = `Classification Description`) %>%
#rename(Current.Month.Net.Transaction.Amount = `Current Month Net Transaction Amount`) %>%
#rename(Fiscal.Year.to.Date.Net.Transaction.Amount = `Fiscal Year to Date Net Transaction Amount`)
# let's poke around the MTS_GuardDirLoan dataset for anything interesting
#colnames(MTS_GuarDirLoan) <- str_replace_all(colnames(MTS_GuarDirLoan), " ", ".") # TODO FUCK YOU Fix me, replace spaces with periods
#
# MTS_GuarDirLoan_CumSums <- MTS_GuarDirLoan |>
#   filter(Classification.Description == "Department of Education:") |>
#   filter(!is.na(Current.Month.Net.Transaction.Amount)) |>
#   select(`Record.Date`, `Classification.Description`, `Current.Month.Net.Transaction.Amount`, `Fiscal.Year.to.Date.Net.Transaction.Amount`)
# DoE is full of null data, yay!
# let's try something else...
# TODO insert more data probing and such here!
#MTS_GuarDirLoan_CumSums <-
MTS_RcptSrcOutlyAgcy |>
#filter()
group_by(`Classification Description`)
#filter(Classification.Description == "Department of Education:") |>
# filter(!is.na(Current.Month.Net.Transaction.Amount))
#select(`Record.Date`, `Classification.Description`, `Current.Month.Net.Transaction.Amount`, `Fiscal.Year.to.Date.Net.Transaction.Amount`)
#mutate(Cumulative.Transaction = cumsum(`Current.Month.Net.Transaction.Amount`))
#rename(Record.Date = `Record Date`) %>% # TODO probably better way to do this in a batch
#rename(Classification.Description = `Classification Description`) %>%
#rename(Current.Month.Net.Transaction.Amount = `Current Month Net Transaction Amount`) %>%
#rename(Fiscal.Year.to.Date.Net.Transaction.Amount = `Fiscal Year to Date Net Transaction Amount`)
# let's poke around the MTS_GuardDirLoan dataset for anything interesting
#colnames(MTS_GuarDirLoan) <- str_replace_all(colnames(MTS_GuarDirLoan), " ", ".") # TODO FUCK YOU Fix me, replace spaces with periods
#
# MTS_GuarDirLoan_CumSums <- MTS_GuarDirLoan |>
#   filter(Classification.Description == "Department of Education:") |>
#   filter(!is.na(Current.Month.Net.Transaction.Amount)) |>
#   select(`Record.Date`, `Classification.Description`, `Current.Month.Net.Transaction.Amount`, `Fiscal.Year.to.Date.Net.Transaction.Amount`)
# DoE is full of null data, yay!
# let's try something else...
# TODO insert more data probing and such here!
#MTS_GuarDirLoan_CumSums <-
MTS_RcptSrcOutlyAgcy |>
filter(`Classification Description` == "Corporation Income Taxes") |>
group_by(`Classification Description`)
#filter(Classification.Description == "Department of Education:") |>
# filter(!is.na(Current.Month.Net.Transaction.Amount))
#select(`Record.Date`, `Classification.Description`, `Current.Month.Net.Transaction.Amount`, `Fiscal.Year.to.Date.Net.Transaction.Amount`)
#mutate(Cumulative.Transaction = cumsum(`Current.Month.Net.Transaction.Amount`))
#rename(Record.Date = `Record Date`) %>% # TODO probably better way to do this in a batch
#rename(Classification.Description = `Classification Description`) %>%
#rename(Current.Month.Net.Transaction.Amount = `Current Month Net Transaction Amount`) %>%
#rename(Fiscal.Year.to.Date.Net.Transaction.Amount = `Fiscal Year to Date Net Transaction Amount`)
